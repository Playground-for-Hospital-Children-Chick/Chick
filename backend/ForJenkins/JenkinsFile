pipeline {
 agent any

 environment {
   GIT_URL = "https://lab.ssafy.com/hju9707/backendtest.git"
 }

 tools {
   gradle "gradle7.6"
 }

 stages {
   stage('Pull') {
     steps {
       script {
         git url: "${GIT_URL}", branch: "master", credentialsId: 'f37fcd64-302f-4c75-8d5c-7bb405e81711', poll: true, changelog: true
       }
     }
   }

   stage('SpringBoot Build') {
     steps {
       script {
         dir('backend') {
             sh './gradlew build'
         }
       }
     }
   }

   stage('Build') {
     steps {
       script {
         sh 'docker build -t springboot ./backend/'
       }
     }
   }

   stage('Deploy') {
     steps {
        echo 'Deploy'
     }
   }

 }
}